{% block datagrid %}
    {{ block('datagrid_table') }}
    {{ block('paginator') }}
{% endblock %}

{% block datagrid_table %}
    <table class="table table-striped table-hover datalist">
        <thead>
        <tr>
            {% for field in datagrid.fields %}
                <th>
                    {{ field.options['label'] | trans({}, 'ShuweeAdminBundle') }}
                </th>
            {% endfor %}
            <th class="actions">{{ "datagrid.actions" | trans({}, 'ShuweeAdminBundle') }}</th>
        </tr>
        </thead>
        <tbody>
        {% for entity in datagrid.datasource %}
            <tr>
                {% for field in datagrid.fields %}
                    <td>
                        {{ datagrid_field(field, entity) }}
                    </td>
                {% endfor %}
                <td class="actions">
                    <div class="btn-toolbar">
                        {#
                        <div class="btn-group btn-group-xs">
                            <a class="btn btn-default" role="button" href="{{ admin_get_path(datagrid.admin, 'view', {'id': entity.id}) }}"><i class="glyphicon glyphicon-eye-open"></i>  {{'crud.view' | trans({}, 'ShuweeAdminBundle') }}</a>
                        </div>
                        #}
                        <div class="btn-group btn-group-xs">
                            {% if datagrid.admin.isGranted('UPDATE', entity) %}
                            <a class="btn btn-primary" role="button" href="{{ admin_get_path(datagrid.admin, 'update', {'id': entity.id}) }}"><i class="glyphicon glyphicon-edit"></i>  {{'crud.edit' | trans({}, 'ShuweeAdminBundle') }}</a>
                            {% endif %}
                            {% if datagrid.admin.isGranted('DELETE', entity) %}
                            <a class="btn btn-danger" role="button" href="{{ admin_get_path(datagrid.admin, 'delete', {'id': entity.id}) }}"><i class="glyphicon glyphicon-trash"></i> {{'crud.delete' | trans({}, 'ShuweeAdminBundle') }}</a>
                            {% endif %}
                        </div>
                    </div>
                </td>
            </tr>
        {% else %}
            {% set size = datagrid.fields | length %}
            <tr>
                <td colspan="{{ size+1 }}">
                    {{ 'datagrid.empty_grid' | trans({}, 'ShuweeAdminBundle') }}
                    <a href="{{ admin_get_path(datagrid.admin, 'create') }}">{{ 'datagrid.empty_grid.create' | trans({}, 'ShuweeAdminBundle') }}</a>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}

{% block datagrid_boolean %}
    {% set label_class = value == true ? 'label-success' : 'label-danger' %}
    {% set text = value == true ?
    label_true|trans({}, 'ShuweeAdminBundle') :
    label_false|trans({}, 'ShuweeAdminBundle') %}

    <span class="label {{ label_class }}">{{ text }}</span>
{% endblock %}

{% block datagrid_collection %}
    {% if value is not null %}
        {% if truncate is defined %}{% set value = value | truncate(truncate) %}{% endif %}
        {{ value }}
    {% else %}
        <span class="text-muted">{{ default_value | default('-') }}</span>
    {% endif %}
{% endblock %}

{% block datagrid_date %}
    {% if value is not null %}
        <time datetime="{{ datetime }}">
            {{ value }}
        </time>
    {% endif %}
{% endblock %}

{% block datagrid_image %}
    {% if value is not null %}
        <img src="{{ value | imagine_filter('datagrid_thumb') }}" data-src="{{ asset(value) }}" alt=""
             class="img-rounded"/>
    {% else %}
        <span class="text-muted">{{ default_value | default('-') }}</span>
    {% endif %}
{% endblock %}

{% block datagrid_text %}
    {% if value is not null %}
        {% if truncate is defined %}{% set value = value | truncate(truncate) %}{% endif %}
        {% if escape %}{{ value }}{% else %}{{ value | raw }}{% endif %}
    {% else %}
        <span class="text-muted">{{ default_value | default('-') }}</span>
    {% endif %}
{% endblock %}

{% block datagrid_url %}
    {% if value is not null %}
        {% if mailto %}
            {% set link = 'mailto:' ~ value %}
        {% else %}
            {% set link = value %}
        {% endif %}

        <a href="{{ link }}" title="{{ value }}">
            {{ label_link }}
        </a>
    {% else %}
        <span class="text-muted">{{ default_value | default('-') }}</span>
    {% endif %}
{% endblock %}

{% block paginator %}

    {% if datagrid.paginator.pageCount > 1 %}
        <nav>
            <ul class="pagination">
                {% if (datagrid.paginator.page == 1) %}
                    <li class="disabled">
                    <span>
                        <span aria-hidden="true">&laquo;</span>
                    </span>
                    </li>
                    <li class="disabled">
                    <span>
                        <span aria-hidden="true">&lsaquo;</span>
                    </span>
                    </li>
                {% else %}
                    <li>
                        <a href="{{ admin_get_path(datagrid.admin, 'index') }}?page=1" aria-label="Previous">
                            <span aria-hidden="true">&laquo;</span>
                        </a>
                    </li>
                    <li>
                        <a href="{{ admin_get_path(datagrid.admin, 'index') }}?page={{ datagrid.paginator.page - 1 }}" aria-label="Previous">
                            <span aria-hidden="true">&lsaquo;</span>
                        </a>
                    </li>
                {% endif %}
                {% for i in 1..datagrid.paginator.pageCount %}
                    {% if datagrid.paginator.page == i %}
                        <li class="active">
                            <span>{{ i }}</span>
                        </li>
                    {% else %}

                        <li>
                            <a href="{{ admin_get_path(datagrid.admin, 'index') }}?page={{ i }}">{{ i }}</a>
                        </li>
                    {% endif %}
                {% endfor %}
                {% if (datagrid.paginator.page == datagrid.paginator.pageCount) %}
                    <li class="disabled">
                    <span>
                        <span aria-hidden="true">&rsaquo;</span>
                    </span>
                    </li>
                    <li class="disabled">
                    <span>
                        <span aria-hidden="true">&raquo;</span>
                    </span>
                    </li>
                {% else %}
                    <li>
                        <a href="{{ admin_get_path(datagrid.admin, 'index') }}?page={{ datagrid.paginator.page + 1 }}" aria-label="Next">
                            <span aria-hidden="true">&rsaquo;</span>
                        </a>
                    </li>
                    <li>
                        <a href="{{ admin_get_path(datagrid.admin, 'index') }}?page={{ datagrid.paginator.pageCount }}" aria-label="Next">
                            <span aria-hidden="true">&raquo;</span>
                        </a>
                    </li>
                {% endif %}
            </ul>
        </nav>
    {% endif %}
{% endblock paginator %}
